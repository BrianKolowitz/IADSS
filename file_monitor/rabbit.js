


<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# githubog: http://ogp.me/ns/fb/githubog#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>squaremo/rabbit.js · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <link rel="logo" type="image/svg" href="https://github-media-downloads.s3.amazonaws.com/github-logo.svg" />
    <meta property="og:image" content="https://github.global.ssl.fastly.net/images/modules/logos_page/Octocat.png">
    <meta name="hostname" content="github-fe114-cp1-prd.iad.github.net">
    <meta name="ruby" content="ruby 1.9.3p194-tcs-github-tcmalloc (e1c0c3f392) [x86_64-linux]">
    <link rel="assets" href="https://github.global.ssl.fastly.net/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035/">
    <link rel="xhr-socket" href="/_sockets" />
    


    <meta name="msapplication-TileImage" content="/windows-tile.png" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="selected-link" value="repo_source" data-pjax-transient />
    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="626FD489:2D7A:2C65CA:52902004" name="octolytics-dimension-request_id" />
    

    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="5S9iWMfAGQAwY4uYK67HTfTED4W5E1ConBiL2xz6UDw=" name="csrf-token" />

    <link href="https://github.global.ssl.fastly.net/assets/github-98e5fdcb5f495c90432b9fa79429de457474a366.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://github.global.ssl.fastly.net/assets/github2-ba8344a0d63f96ce25c8bd5e556ee2d9fb1659c1.css" media="all" rel="stylesheet" type="text/css" />
    

    

      <script src="https://github.global.ssl.fastly.net/assets/frameworks-38734f67d02a2e68713f8870aab1d793061f6beb.js" type="text/javascript"></script>
      <script src="https://github.global.ssl.fastly.net/assets/github-f0a357aab5fc5c7f48acdc0169b4fd2fe0cfffcd.js" type="text/javascript"></script>
      
      <meta http-equiv="x-pjax-version" content="8995ce1292f03ccb0ea6f7619d531aa9">

        <meta property="og:title" content="rabbit.js"/>
  <meta property="og:type" content="githubog:gitrepository"/>
  <meta property="og:url" content="https://github.com/squaremo/rabbit.js"/>
  <meta property="og:image" content="https://github.global.ssl.fastly.net/images/gravatars/gravatar-user-420.png"/>
  <meta property="og:site_name" content="GitHub"/>
  <meta property="og:description" content="rabbit.js - Messaging in Node.JS made easy using RabbitMQ"/>

  <meta name="description" content="rabbit.js - Messaging in Node.JS made easy using RabbitMQ" />

  <meta content="62033" name="octolytics-dimension-user_id" /><meta content="squaremo" name="octolytics-dimension-user_login" /><meta content="949801" name="octolytics-dimension-repository_id" /><meta content="squaremo/rabbit.js" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="949801" name="octolytics-dimension-repository_network_root_id" /><meta content="squaremo/rabbit.js" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/squaremo/rabbit.js/commits/master.atom" rel="alternate" title="Recent Commits to rabbit.js:master" type="application/atom+xml" />

  </head>


  <body class="logged_out  env-production linux vis-public">
    <div class="wrapper">
      
      
      
      


      
      <div class="header header-logged-out">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions">
        <a class="button primary" href="/join">Sign up</a>
      <a class="button signin" href="/login?return_to=%2Fsquaremo%2Frabbit.js">Sign in</a>
    </div>

    <div class="command-bar js-command-bar  in-repository">

      <ul class="top-nav">
          <li class="explore"><a href="/explore">Explore</a></li>
        <li class="features"><a href="/features">Features</a></li>
          <li class="enterprise"><a href="https://enterprise.github.com/">Enterprise</a></li>
          <li class="blog"><a href="/blog">Blog</a></li>
      </ul>
        <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">

<input type="text" data-hotkey=" s" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" autocapitalize="off"
    
    
      data-repo="squaremo/rabbit.js"
      data-branch="master"
      data-sha="b49b018fc7cba788ed0e20166e09840356408e6a"
  >

    <input type="hidden" name="nwo" value="squaremo/rabbit.js" />

    <div class="select-menu js-menu-container js-select-menu search-context-select-menu">
      <span class="minibutton select-menu-button js-menu-target">
        <span class="js-select-button">This repository</span>
      </span>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container">
        <div class="select-menu-modal">

          <div class="select-menu-item js-navigation-item js-this-repository-navigation-item selected">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" class="js-search-this-repository" name="search_target" value="repository" checked="checked" />
            <div class="select-menu-item-text js-select-button-text">This repository</div>
          </div> <!-- /.select-menu-item -->

          <div class="select-menu-item js-navigation-item js-all-repositories-navigation-item">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" name="search_target" value="global" />
            <div class="select-menu-item-text js-select-button-text">All repositories</div>
          </div> <!-- /.select-menu-item -->

        </div>
      </div>
    </div>

  <span class="octicon help tooltipped downwards" title="Show command bar help">
    <span class="octicon octicon-question"></span>
  </span>


  <input type="hidden" name="ref" value="cmdform">

</form>
    </div>

  </div>
</div>


      


          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        

<ul class="pagehead-actions">


  <li>
    <a href="/login?return_to=%2Fsquaremo%2Frabbit.js"
    class="minibutton with-count js-toggler-target star-button tooltipped upwards"
    title="You must be signed in to use this feature" rel="nofollow">
    <span class="octicon octicon-star"></span>Star
  </a>

    <a class="social-count js-social-count" href="/squaremo/rabbit.js/stargazers">
      508
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2Fsquaremo%2Frabbit.js"
        class="minibutton with-count js-toggler-target fork-button tooltipped upwards"
        title="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-git-branch"></span>Fork
      </a>
      <a href="/squaremo/rabbit.js/network" class="social-count">
        49
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="repo-label"><span>public</span></span>
          <span class="mega-octicon octicon-repo"></span>
          <span class="author">
            <a href="/squaremo" class="url fn" itemprop="url" rel="author"><span itemprop="title">squaremo</span></a>
          </span>
          <span class="repohead-name-divider">/</span>
          <strong><a href="/squaremo/rabbit.js" class="js-current-repository js-repo-home-link">rabbit.js</a></strong>

          <span class="page-context-loader">
            <img alt="Octocat-spinner-32" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    

    <div class="container">

      <div class="repository-with-sidebar repo-container with-full-navigation ">

        <div class="repository-sidebar">
            

<div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
  <div class="sunken-menu-contents">
    <ul class="sunken-menu-group">
      <li class="tooltipped leftwards" title="Code">
        <a href="/squaremo/rabbit.js" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-gotokey="c" data-pjax="true" data-selected-links="repo_source repo_downloads repo_commits repo_tags repo_branches /squaremo/rabbit.js">
          <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

        <li class="tooltipped leftwards" title="Issues">
          <a href="/squaremo/rabbit.js/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="i" data-selected-links="repo_issues /squaremo/rabbit.js/issues">
            <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
            <span class='counter'>10</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>

      <li class="tooltipped leftwards" title="Pull Requests"><a href="/squaremo/rabbit.js/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="p" data-selected-links="repo_pulls /squaremo/rabbit.js/pulls">
            <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
            <span class='counter'>2</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>


    </ul>
    <div class="sunken-menu-separator"></div>
    <ul class="sunken-menu-group">

      <li class="tooltipped leftwards" title="Pulse">
        <a href="/squaremo/rabbit.js/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="pulse /squaremo/rabbit.js/pulse">
          <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped leftwards" title="Graphs">
        <a href="/squaremo/rabbit.js/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_graphs repo_contributors /squaremo/rabbit.js/graphs">
          <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped leftwards" title="Network">
        <a href="/squaremo/rabbit.js/network" aria-label="Network" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-selected-links="repo_network /squaremo/rabbit.js/network">
          <span class="octicon octicon-git-branch"></span> <span class="full-word">Network</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
    </ul>


  </div>
</div>

            <div class="only-with-full-nav">
              

  

<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/squaremo/rabbit.js.git" readonly="readonly">

    <span class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/squaremo/rabbit.js.git" data-copied-hint="copied!" title="copy to clipboard"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><strong>Subversion</strong> checkout URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/squaremo/rabbit.js" readonly="readonly">

    <span class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/squaremo/rabbit.js" data-copied-hint="copied!" title="copy to clipboard"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a>,
      or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <span class="octicon help tooltipped upwards" title="Get help on which URL is right for you.">
    <a href="https://help.github.com/articles/which-remote-url-should-i-use">
    <span class="octicon octicon-question"></span>
    </a>
  </span>
</p>



              <a href="/squaremo/rabbit.js/archive/master.zip"
                 class="minibutton sidebar-button"
                 title="Download this repository as a zip file"
                 rel="nofollow">
                <span class="octicon octicon-cloud-download"></span>
                Download ZIP
              </a>
            </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          

<span id="js-show-full-navigation"></span>

<div class="repository-meta js-details-container ">
    <div class="repository-description js-details-show">
      <p>Messaging in Node.JS made easy using RabbitMQ</p>
    </div>



</div>

<div class="capped-box overall-summary ">

  <div class="stats-switcher-viewport js-stats-switcher-viewport">

    <ul class="numbers-summary">
      <li class="commits">
        <a data-pjax href="/squaremo/rabbit.js/commits/master">
            <span class="num">
              <span class="octicon octicon-history"></span>
              96
            </span>
            commits
        </a>
      </li>
      <li>
        <a data-pjax href="/squaremo/rabbit.js/branches">
          <span class="num">
            <span class="octicon octicon-git-branch"></span>
            4
          </span>
          branches
        </a>
      </li>

      <li>
        <a data-pjax href="/squaremo/rabbit.js/releases">
          <span class="num">
            <span class="octicon octicon-tag"></span>
            3
          </span>
          releases
        </a>
      </li>

      <li>
          <a href="/squaremo/rabbit.js/graphs/contributors" class="js-deferred-content" data-url="/squaremo/rabbit.js/contributors_size">
            <span class="num">
              <span class="octicon octicon-organization"></span>
            </span>
            Fetching contributors
          </a>
      </li>
    </ul>

      <div class="repository-lang-stats">
        <ol class="repository-lang-stats-numbers">
          <li>
              <a href="/squaremo/rabbit.js/search?l=javascript">
                <span class="color-block language-color" style="background-color:#f15501;"></span>
                <span class="lang">JavaScript</span>
                <span class="percent">100%</span>
              </a>
          </li>
        </ol>
      </div>
  </div>

</div>

  <a href="#"
     class="repository-lang-stats-graph js-toggle-lang-stats tooltipped downwards"
     title="Show language statistics"
     style="background-color:#f15501">
  <span class="language-color" style="width:100%; background-color:#f15501;" itemprop="keywords">JavaScript</span>
  </a>



<div class="file-navigation in-mid-page">
    <a href="/squaremo/rabbit.js/compare" aria-label="Compare, review, create a pull request" class="minibutton compact primary tooltipped downwards" title="Compare &amp; review" data-pjax>
      <span class="octicon octicon-git-compare"></span>
    </a>

  

<div class="select-menu js-menu-container js-select-menu" >
  <span class="minibutton select-menu-button js-menu-target" data-hotkey="w"
    data-master-branch="master"
    data-ref="master"
    role="button" aria-label="Switch branches or tags" tabindex="0">
    <span class="octicon octicon-git-branch"></span>
    <i>branch:</i>
    <span class="js-select-button">master</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax>

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-remove-close js-menu-close"></span>
      </div> <!-- /.select-menu-header -->

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div><!-- /.select-menu-tabs -->
      </div><!-- /.select-menu-filters -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/squaremo/rabbit.js/tree/amqplib"
                 data-name="amqplib"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="amqplib">amqplib</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item selected">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/squaremo/rabbit.js/tree/master"
                 data-name="master"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="master">master</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/squaremo/rabbit.js/tree/proper_streams"
                 data-name="proper_streams"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="proper_streams">proper_streams</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/squaremo/rabbit.js/tree/v0.3"
                 data-name="v0.3"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.3">v0.3</a>
            </div> <!-- /.select-menu-item -->
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/squaremo/rabbit.js/tree/v0.2.2"
                 data-name="v0.2.2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.2.2">v0.2.2</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/squaremo/rabbit.js/tree/v0.2.1-amqplib"
                 data-name="v0.2.1-amqplib"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.2.1-amqplib">v0.2.1-amqplib</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/squaremo/rabbit.js/tree/v0.2.1"
                 data-name="v0.2.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.2.1">v0.2.1</a>
            </div> <!-- /.select-menu-item -->
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

    </div> <!-- /.select-menu-modal -->
  </div> <!-- /.select-menu-modal-holder -->
</div> <!-- /.select-menu -->


  <div class="breadcrumb"><span class='repo-root js-repo-root'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/squaremo/rabbit.js" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">rabbit.js</span></a></span></span><span class="separator"> / </span><form action="/login?return_to=%2Fsquaremo%2Frabbit.js" class="js-new-blob-form tooltipped rightwards new-file-link" method="post" title="Sign in to make or propose changes"><span aria-label="Sign in to make or propose changes" class="js-new-blob-submit octicon octicon-file-add" data-test-id="create-new-git-file" role="button"></span></form></div>
</div>



<a href="/squaremo/rabbit.js/find/master"
  data-hotkey="t" class="js-show-file-finder" style="display:none" data-pjax>Show File Finder</a>
<div class="bubble files-bubble">


  <div class="commit commit-tease js-details-container" >
    <p class="commit-title ">
        <a href="/squaremo/rabbit.js/commit/58618c9fbbc3d7ac4e266a2d230ce520c3f4f0ea" class="message" data-pjax="true" title="Add syntax highlighting to Readme">Add syntax highlighting to Readme</a>
        
    </p>
    <div class="commit-meta">
      <span class="js-zeroclipboard zeroclipboard-link" data-clipboard-text="58618c9fbbc3d7ac4e266a2d230ce520c3f4f0ea" data-copied-hint="copied!" title="Copy SHA"><span class="octicon octicon-clippy"></span></span>
      <a href="/squaremo/rabbit.js/commit/58618c9fbbc3d7ac4e266a2d230ce520c3f4f0ea" class="sha-block" data-pjax>latest commit <span class="sha">58618c9fbb</span></a>

      <div class="authorship">
        <img class="gravatar" height="20" src="https://1.gravatar.com/avatar/f0deca4576206207a882928e7ff32ddb?d=https%3A%2F%2Fidenticons.github.com%2Fd456fd223d951cb756e4758581f31e01.png&amp;r=x&amp;s=140" width="20" />
        <span class="author-name"><a href="/timoxley" data-skip-pjax="true" rel="contributor">timoxley</a></span>
        authored <time class="js-relative-date updated" datetime="2013-07-22T23:10:50-07:00" title="2013-07-22 23:10:50">July 22, 2013</time>

      </div>
    </div>
  </div>

  <table class="files" data-pjax>

    
<tbody class=""
  data-url="/squaremo/rabbit.js/file-list/master">
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-directory"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/tree/master/example" class="js-directory-link" id="1a79a4d60de6718e8e5b326e338ae533-490a6fcb236157263a9722864d1012d55c7764a8" title="example">example</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/05fa69608bacca2799dc45125ba8b339611dbc6c" class="message" data-pjax="true" title="Use sockjs 0.2">Use sockjs 0.2</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2012-03-22T04:56:51-07:00" title="2012-03-22 04:56:51">March 22, 2012</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-directory"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/tree/master/lib" class="js-directory-link" id="e8acc63b1e238f3255c900eed37254b8-68531905bbb4610617964a4ec76189ca000f0c2f" title="lib">lib</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/21d21c8fc01f21ef0f0b6e8001bfaef04700171e" class="message" data-pjax="true" title="Convert expirations to strings, to avoid surprises

.. and to conform to the README. Issue 45.">Convert expirations to strings, to avoid surprises</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2013-07-18T12:08:51-07:00" title="2013-07-18 12:08:51">July 18, 2013</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-directory"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/tree/master/test" class="js-directory-link" id="098f6bcd4621d373cade4e832627b4f6-21d62561d2e927606499575aee7370e76f533fd4" title="test">test</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/21d21c8fc01f21ef0f0b6e8001bfaef04700171e" class="message" data-pjax="true" title="Convert expirations to strings, to avoid surprises

.. and to conform to the README. Issue 45.">Convert expirations to strings, to avoid surprises</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2013-07-18T12:08:51-07:00" title="2013-07-18 12:08:51">July 18, 2013</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/blob/master/.gitignore" class="js-directory-link" id="a084b794bc0759e7a6b77810e01874f2-ceb77e01c1ffa162e982f838c102ea6f9dbdc652" title=".gitignore">.gitignore</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/139879560cf0067e10a27d13a15e10eac3dbf59c" class="message" data-pjax="true" title="Ignore emacs backups and npm logs">Ignore emacs backups and npm logs</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2013-05-02T08:48:26-07:00" title="2013-05-02 08:48:26">May 02, 2013</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/blob/master/LICENSE" class="js-directory-link" id="9879d6db96fd29134fc802214163b95a-61099a6bdd0ba254f6be69da65b5e6905b59e1c8" title="LICENSE">LICENSE</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/7e2154a05bfd789ccd427c3d6de6d531de139e94" class="message" data-pjax="true" title="License.">License.</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2010-11-15T07:49:20-08:00" title="2010-11-15 07:49:20">November 15, 2010</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/blob/master/LICENSE-MPL" class="js-directory-link" id="8eaa1e41b008dafa4f9bc9131356bbdc-e451b632f22a55ece11c44db2483c2bddbe621ab" title="LICENSE-MPL">LICENSE-MPL</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/7e2154a05bfd789ccd427c3d6de6d531de139e94" class="message" data-pjax="true" title="License.">License.</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2010-11-15T07:49:20-08:00" title="2010-11-15 07:49:20">November 15, 2010</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/blob/master/README.md" class="js-directory-link" id="04c6e90faac2675aa89e2176d2eec7d8-d9ee741e1c06948bf1e0e60bab8d38c589446c8c" title="README.md">README.md</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/58618c9fbbc3d7ac4e266a2d230ce520c3f4f0ea" class="message" data-pjax="true" title="Add syntax highlighting to Readme">Add syntax highlighting to Readme</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2013-07-22T23:10:50-07:00" title="2013-07-22 23:10:50">July 22, 2013</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/blob/master/RELEASE_NOTES" class="js-directory-link" id="6ff2628eef229ca06dde6031684f20a6-639d9d3310d233a1c2bfbf112a727acbd6f290d6" title="RELEASE_NOTES">RELEASE_NOTES</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/90144425de479730002b12bdff3f81a19b9b1ccc" class="message" data-pjax="true" title="Release notes and version bump for v0.2.2">Release notes and version bump for v0.2.2</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2013-07-03T07:49:14-07:00" title="2013-07-03 07:49:14">July 03, 2013</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/blob/master/index.js" class="js-directory-link" id="168726dbe96b3ce427e7fedce31bb0bc-28441edefc1fd3c464e66c0e20da940d55d9aea7" title="index.js">index.js</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/c039e86b3fb924a9432f20de2369e7d9c0b9a520" class="message" data-pjax="true" title="Tidy up packaging; bump minor version to denote change in API (major ver...

...sion still 0 NB). Get rid of messages.js since spb does that better.">Tidy up packaging; bump minor version to denote change in API (major …</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2012-01-06T04:18:31-08:00" title="2012-01-06 04:18:31">January 06, 2012</time></span></td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="Octocat-spinner-32" class="spinner" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/blob/master/package.json" class="js-directory-link" id="b9cfc7f2cdf78a7f4b91a753d10865a2-3426246722c84fa315316cadeb728ee71cf86497" title="package.json">package.json</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target"><a href="/squaremo/rabbit.js/commit/90144425de479730002b12bdff3f81a19b9b1ccc" class="message" data-pjax="true" title="Release notes and version bump for v0.2.2">Release notes and version bump for v0.2.2</a></span>
      </td>
      <td class="age"><span class="css-truncate css-truncate-target"><time class="js-relative-date" datetime="2013-07-03T07:49:14-07:00" title="2013-07-03 07:49:14">July 03, 2013</time></span></td>
    </tr>
</tbody>

  </table>
</div>

  <div id="readme" class="clearfix announce instapaper_body md">
    <span class="name">
      <span class="octicon octicon-book"></span>
      README.md
    </span>

    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="messaging-in-nodejs-with-rabbitmq" class="anchor" href="#messaging-in-nodejs-with-rabbitmq"><span class="octicon octicon-link"></span></a>Messaging in Node.JS with RabbitMQ</h1>

<pre><code>$ npm install rabbit.js
</code></pre>

<p>This library provides a simple, socket-oriented API* for messaging in
<a href="http://nodejs.org/">node.js</a>, using
<a href="http://www.rabbitmq.com/">RabbitMQ</a> as a backend.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'rabbit.js'</span><span class="p">).</span><span class="nx">createContext</span><span class="p">();</span>
<span class="nx">context</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'ready'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">pub</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">socket</span><span class="p">(</span><span class="s1">'PUB'</span><span class="p">),</span> <span class="nx">sub</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">socket</span><span class="p">(</span><span class="s1">'SUB'</span><span class="p">);</span>
  <span class="nx">sub</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">);</span>
  <span class="nx">sub</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'events'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">pub</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'events'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">pub</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">welcome</span><span class="o">:</span> <span class="s1">'rabbit.js'</span><span class="p">}),</span> <span class="s1">'utf8'</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>

<p>*Yes, rather like ZeroMQ. <a href="#zeromq">See below</a>.</p>

<h2>
<a name="status" class="anchor" href="#status"><span class="octicon octicon-link"></span></a>Status</h2>

<p>Still on major version <code>0</code>, though in use in a number of places, I
believe.</p>

<p>For the minute there are two branches: <code>master</code> continues the original
implementation, based on node-amqp. <code>amqplib</code> has a reimplementation
based on amqplib, which I believe to be the Way Forward. These are
available in npm as "regular" versions (e.g., 0.2.2), and "amqplib"
versions (e.g., 0.2.1-amqplib). The features and API are equivalent
in equivalent version numbers.</p>

<p>Version 0.2.2 will likely be the last version based on node-amqp.</p>

<h2>
<a name="uses" class="anchor" href="#uses"><span class="octicon octicon-link"></span></a>Uses</h2>

<p>This library is suitable for co-ordinating peers (e.g., Node.JS
programs), acting as a gateway to other kinds of network (e.g.,
relaying to browsers via SockJS), or simply as a really easy way to
use RabbitMQ.</p>

<h2>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h2>

<p>The entry point is <code>createContext</code>, which gives you a factory for
sockets. You supply it the URL to your RabbitMQ server:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'rabbit.js'</span><span class="p">).</span><span class="nx">createContext</span><span class="p">(</span><span class="s1">'amqp://localhost'</span><span class="p">);</span>
</pre></div>

<p>A context emits <code>'error'</code> with an <code>Error</code> object if there's a problem
with the underlying connection to the server. This invalidates the
context and all its sockets.</p>

<p>A context may be disconnected from the server with <code>#close()</code>. It will
emit <code>'close'</code> once the underlying connection has been terminated.</p>

<p>To start sending or receiving messages you need to acquire a socket:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">pub</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">socket</span><span class="p">(</span><span class="s1">'PUB'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">sub</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">socket</span><span class="p">(</span><span class="s1">'SUB'</span><span class="p">);</span>
</pre></div>

<p>and connect it to something:</p>

<div class="highlight highlight-js"><pre><span class="nx">pub</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'alerts'</span><span class="p">);</span>
<span class="nx">sub</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'alerts'</span><span class="p">);</span>
</pre></div>

<p>Sockets act like ("old style")
<a href="http://nodejs.org/docs/v0.8.25/api/stream.html">Streams</a>; in
particular you will get <code>'data'</code> events from those that are readable,
and you can <code>write()</code> to those that are writable. If you're expecting
data that is encoded strings, you can <code>setEncoding()</code> to get strings
instead of buffers as data events.</p>

<div class="highlight highlight-js"><pre><span class="nx">sub</span><span class="p">.</span><span class="nx">setEncoding</span><span class="p">(</span><span class="s1">'utf8'</span><span class="p">);</span>
<span class="nx">sub</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">note</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Alarum! "</span> <span class="o">+</span> <span class="nx">note</span><span class="p">);</span> <span class="p">});</span>

<span class="nx">pub</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">"Emergency. There's an emergency going on"</span><span class="p">,</span> <span class="s1">'utf8'</span><span class="p">);</span>
</pre></div>

<p>You can also use pipe to forward messages to or from another stream,
making relaying simple:</p>

<div class="highlight highlight-js"><pre><span class="nx">sub</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">);</span>
</pre></div>

<p>A socket may be connected more than once, by calling
<code>socket.connect(x)</code> with different <code>x</code>s. What this entails depends on
the socket type (see below), but messages to and from different
<code>connect()</code>ions are not distinguished. For example</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">sub2</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">socket</span><span class="p">(</span><span class="s1">'SUB'</span><span class="p">);</span>
<span class="nx">sub2</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'system'</span><span class="p">);</span>
<span class="nx">sub2</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'notifications'</span><span class="p">);</span>
</pre></div>

<p>Here, the socket <code>sub2</code> will receive all messages published to
<code>'system'</code> and all those published to <code>'notifications'</code> as well, but
it is not possible to discriminate between the sources.</p>

<p>Some socket types have options that may be set with
<code>#setsockopt</code>. Presently there's just one option, on PUB and PUSH
sockets, which is message expiration, given as a stringified number of
milliseconds:</p>

<div class="highlight highlight-js"><pre><span class="nx">pub</span><span class="p">.</span><span class="nx">setsockopt</span><span class="p">(</span><span class="s1">'expiration'</span><span class="p">,</span> <span class="s1">'60000'</span><span class="p">)</span>
</pre></div>

<p>In the example, messages written to <code>pub</code> will be discarded by the
server if they've not been delivered after 60,000
milliseconds. Message expiration only works with versions of RabbitMQ
newer than 3.0.0.</p>

<p>Lastly, a socket may be closed using <code>#end()</code>; this will clean up
resources, and emit <code>'end'</code> once it's done so.</p>

<h3>
<a name="socket-types" class="anchor" href="#socket-types"><span class="octicon octicon-link"></span></a>Socket types</h3>

<p>The socket types, passed as an argument to <code>Context#socket</code>, determine
whether the socket is readable and writable, and what happens to
messages written to it. Socket types (but not necessarily sockets
themselves) should be used in the pairs described below.</p>

<p>To make the descriptions a bit easier, we'll say if
<code>connect(x)</code> is called on a socket for some <code>x</code>, the socket has a
connection to x.</p>

<p><strong>PUB</strong>lish / <strong>SUB</strong>scribe: every SUB socket connected to  gets
each message sent by a PUB socket connected to ; a PUB socket
sends every message to each of its connections. SUB sockets are
readable only, and PUB sockets are writable only.</p>

<p><strong>PUSH</strong> / <strong>PULL</strong>: a PUSH socket will send each message to a
single connection, using round-robin. A PULL socket will receive a
share of the messages sent to each  to which it is connected,
determined by round-robin at . PUSH sockets are writable only, and
PULL sockets are readable only.</p>

<p><strong>REQ</strong>uest / <strong>REP</strong>ly: a REQ socket sends each message to one of
its connections, and receives replies in turn; a REP socket receives a
share of the messages sent to each  to which it is connected, and
must send a reply in turn. REQ and REP sockets are both readable and
writable.</p>

<h2>
<a name="using-with-servers" class="anchor" href="#using-with-servers"><span class="octicon octicon-link"></span></a>Using with servers</h2>

<p>A few modules have a socket-server-like abstraction; canonically, the
<code>net</code> module, but also for example SockJS and Socket.IO. These can be
adapted using something similar to the following.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'rabbit.js'</span><span class="p">).</span><span class="nx">createContext</span><span class="p">(</span><span class="s1">'amqp://localhost'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">inServer</span> <span class="o">=</span> <span class="nx">net</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">connection</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">socket</span><span class="p">(</span><span class="s1">'PUB'</span><span class="p">);</span>
  <span class="nx">s</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'incoming'</span><span class="p">);</span>
  <span class="nx">connection</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">inServer</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
</pre></div>

<p>This is a simplistic example; a bare TCP socket won't in general emit
data in chunks that are meaningful to applications, even if they are
written that way at the far end. A library such as
<a href="https://github.com/squaremo/node-spb">spb</a> can be used encode and
decode message streams in byte streams if needed.</p>

<h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>Each subdirectory of <code>example</code> has code demonstrating using
rabbit.js with other modules. Install the prerequisites for rabbit.js
first:</p>

<pre><code>rabbit.js$ npm install
</code></pre>

<p>Now each example can be run with, e.g.,</p>

<pre><code>rabbit.js$ cd example/sockjs
sockjs$ npm install &amp;&amp; npm start
</code></pre>

<p>All of the examples assume there is a <a href="http://rabbit.mq/download.html">RabbitMQ server
running</a> locally. The SockJS and
Socket.IO examples both start a website which you can visit at
<code>http://localhost:8080</code>.</p>

<h2>
<a name="relation-to-zeromq" class="anchor" href="#relation-to-zeromq"><span class="octicon octicon-link"></span></a><a name="zeromq"></a>Relation to ZeroMQ</h2>

<p>rabbit.js was inspired by the <a href="http://github.com/rabbitmq/rmq-0mq/">RabbitMQ/ZeroMQ
adapter</a> I developed with Martin
Sústrik. The rationale for using RabbitMQ in a ZeroMQ-based network is
largely transferable to rabbit.js:</p>

<ul>
<li>RabbitMQ introduces a degree of monitoring and transparency,
especially if one uses the web management app;</li>
<li>RabbitMQ can bridge to other protocols (notably AMQP and STOMP);</li>
<li>RabbitMQ provides reliable, persistent queues if desired</li>
</ul><p>with some additional benefits:</p>

<ul>
<li>since rabbit.js sockets implement the <code>Stream</code> interface, one
can easily pipe messages around</li>
<li>using RabbitMQ as a backend obviates some configuration management
-- just supply all instances the broker URL and you're good to go.</li>
<li>there's room in the API for more involved routing and other
behaviour since AMQP is, well, more complicated let's say.</li>
</ul><p>Here are some notable differences and similarities to ZeroMQ in
rabbit.js's API and semantics.</p>

<p>To start, there's no distinction in rabbit.js between clients and
servers (<code>connect</code> and <code>bind</code> in ZeroMQ, following the BSD socket
API), since RabbitMQ is effectively acting as a relaying server for
everyone to <code>connect</code> to. Relatedly, the argument supplied to
<code>connect()</code> is abstract, in the sense that it's just a name rather
than a transport-layer address.</p>

<p>Request and Reply sockets have very similar semantics to those in
ZeroMQ. Requesting sockets must take care not to issue more than
request at a time, or to label requests (and rely on repliers
preserving the label in replies) such that the answers can be
correlated with the requests. Actually this is much the same as
ZeroMQ; it follows from the possibility of replies coming back out of
order due to round-robining. Repliers must respond to requests in the
order that they come in, and respond exactly once to each request.</p>

<p>There are no DEALER or ROUTER sockets (a.k.a., XREQ and XREQ) in
rabbit.js. In ZeroMQ these are implemented by prefixing messages with
a reverse path, which then requires encoding and thereby complication
when relaying to other streams or protocols. Instead, rabbit.js notes
the reverse path as messages are relayed to a REP socket, and
reapplies it when the response appears (giving rise to the ordering
requirement on repliers).</p>

<h2>
<a name="relation-to-amqp-and-stomp" class="anchor" href="#relation-to-amqp-and-stomp"><span class="octicon octicon-link"></span></a>Relation to AMQP and STOMP</h2>

<p>rabbit.js makes some simplifying assumptions that must be kept in mind
when integrating with other protocols that RabbitMQ supports.</p>

<p>PUB and SUB sockets declare non-durable fanout exchanges named for the
argument given to <code>connect</code>. To send to SUB sockets or receive from
PUB sockets, publish or bind (or subscribe in the case of STOMP) to
the exchange with the same name.</p>

<p>PUSH, PULL, REQ and REP sockets use durable, non-exclusive queues
named for the argument given to <code>connect</code>. If you are replying, be
sure to follow the convention of sending the response to the queue
given in the <code>'replyTo'</code> property of the request message.</p>

<h2>
<a name="what-happened-to-listen" class="anchor" href="#what-happened-to-listen"><span class="octicon octicon-link"></span></a>What happened to <code>listen()</code>?</h2>

<p>I removed it. It wasn't entirely wrong, but it did have two failings:
firstly, it exposed the socket type and the address to the (end)
client, while the client ought not to need know about them; secondly,
and more fatally, it required a dedicated client connection per
socket, which is a problem for e.g., browsers.</p>

<p>The new API avoids these problems by not requiring any particular
behaviour from a client connection -- that is totally up to you (if
you even use any client connections). If you need to multiplex on a
client connection you can do that by, say, prefixing each message with
a channel name; or, as the Socket.IO example does, combine two simplex
sockets onto a duplex client connection.</p></article>
  </div>


        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com">API</a></li>
      <li><a href="http://training.github.com">Training</a></li>
      <li><a href="http://shop.github.com">Shop</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/about">About</a></li>

    </ul>

    <a href="/">
      <span class="mega-octicon octicon-mark-github"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2013 <span title="0.03477s from github-fe114-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms">Terms</a></li>
        <li><a href="/site/privacy">Privacy</a></li>
        <li><a href="/security">Security</a></li>
        <li><a href="/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
          <div class="suggester-container">
              <div class="suggester fullscreen-suggester js-navigation-container" id="fullscreen_suggester"
                 data-url="/squaremo/rabbit.js/suggestions/commit">
              </div>
          </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped leftwards" title="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped leftwards"
      title="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-remove-close close ajax-error-dismiss"></a>
      Something went wrong with that request. Please try again.
    </div>

  </body>
</html>

